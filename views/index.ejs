<!DOCTYPE html>
<html>

<head>
    <script src="https://aframe.io/releases/1.0.0/aframe.min.js"></script>
    <!-- we import arjs version without NFT but with marker + location based support -->
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    <script src="https://unpkg.com/aframe-state-component@6.7.0/dist/aframe-state-component.min.js"></script>
    <script>
        /// Global declartion of Menu Items
        const menuItemsJSON = '<%- JSON.stringify(menuItems) %>'
        const menuItems = JSON.parse(menuItemsJSON);
        console.log({
            menuItems
        })
    </script>
    <script src="/javascript/aframe-state.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="https://unpkg.com/flickity@2/dist/flickity.min.css">
    <!-- <link type="text/css" rel="stylesheet" href="/stylesheets/bootstrap.min.css" /> -->
    <link type="text/css" rel="stylesheet" href="/stylesheets/index.css" />

</head>

<body style='margin : 0px; overflow: hidden;'>
    <!-- we add detectionMode and matrixCodeType to tell AR.js to recognize barcode markers -->
    <div class="html-ui">
        <div class="main-carousel">
            <% menuItems.forEach(function(item) { %>
                <div class="carousel-cell" data-flickity-bg-lazyload="<%= item.imageUrl %>">
                    <div class="bg-overlay">
                        <div class="text-wrapper">
                            <p><b><%= item.name %></b>
                                <br/>
                                <%= item.priceString %>
                            </p>
                        </div>
                    </div>
                </div>
                <% }) %>
        </div>
    </div>


    <a-scene embedded vr-mode-ui="enabled: false" arjs="sourceType: webcam; debugUIEnabled: false; detectionMode: mono_and_matrix; matrixCodeType: 3x3; trackingMethod: best;">
        <a-assets>
                <% menuItems.forEach(function(item) { %>
                    <a-asset-item id="<%= item.id %>" src="<%= item.object.url %>" >

                    </a-asset-item>
                    <% }) %>
        </a-assets>

        <a-marker type='barcode' value='31'>
            <a-box position='0 0.5 0' color="yellow"></a-box>
        </a-marker>

        <a-marker id="animated-marker" type='barcode' value='30'>
            <a-entity id="aEntity" bind__gltf-model="model.id" bind__scale="model.scale">
            </a-entity>
        </a-marker>

        <a-entity camera></a-entity>

    </a-scene>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/flickity@2/dist/flickity.pkgd.min.js"></script>
    <script src="https://unpkg.com/flickity-bg-lazyload@1/bg-lazyload.js"></script>
    <script src="/javascript/index.js"></script>

</body>

</html>